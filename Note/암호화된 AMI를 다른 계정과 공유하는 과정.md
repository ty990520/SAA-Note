## 암호화된 AMI를 다른 계정과 공유하는 과정

A 계정에 있는 특정 AMI(이미지)를 B 계정에서 사용하려고 합니다. 그런데, 이 AMI는 KMS 키로 암호화되어 있습니다. 그러므로, B 계정에서 이 AMI를 사용하려면 몇 가지 단계를 거쳐야 합니다.

<br>

1. **AMI 공유하기**: A 계정은 해당 `AMI의 '시작 권한'`을 수정하여 B 계정에게 해당 AMI를 사용할 권한을 줍니다. 이것은 AMI의 설정에서 특정 계정 ID를 추가하는 것으로, 그 결과 B 계정이 이 AMI로 EC2 인스턴스를 시작할 수 있게 됩니다.

2. **KMS 키 공유하기**: 단순히 AMI만 공유하는 것으로는 충분하지 않습니다. 암호화된 AMI를 사용하려면 해당 `KMS 키에 대한 접근 권한`도 필요합니다. A 계정은 KMS 키 정책을 수정하여 B 계정에게 이 키를 사용할 권한을 줍니다.

3. **B 계정에서의 설정**: B 계정에서는 `AMI와 KMS 키를 사용할 수 있는 IAM 역할이나 사용자를 생성`합니다. 이 역할 또는 사용자는 KMS와 관련된 특정 API 호출 권한(예: DescribeKey, ReEncrypt, CreateGrant, Decrypt 등)이 필요합니다.

4. **선택 사항 – 재암호화**: B 계정에서 원한다면, 자체 KMS 키를 사용하여 볼륨의 데이터를 재암호화할 수 있습니다. 이는 추가적인 보안 단계입니다.

5. **EC2 인스턴스 시작**: 위의 모든 설정이 완료되면, B 계정에서 A 계정에서 공유받은 AMI를 사용하여 EC2 인스턴스를 시작할 수 있습니다.


